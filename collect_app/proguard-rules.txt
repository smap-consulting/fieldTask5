-dontwarn com.google.**
-dontwarn au.com.bytecode.**
-dontwarn org.joda.time.**
-dontwarn org.osmdroid.**
-dontwarn org.xmlpull.v1.**
-dontwarn org.hamcrest.**
-dontwarn com.rarepebble.**
-dontwarn com.networknt.**
-dontwarn android.content.res.**
-dontwarn org.kxml2.io.**

-keep class org.odk.collect.android.logic.actions.**
-keep class android.support.v7.widget.** { *; }
-keep class org.mp4parser.boxes.** { *; }
-keep class * extends androidx.fragment.app.Fragment{}

-keep class * implements org.javarosa.core.util.externalizable.Externalizable{}
-keep class org.javarosa.core.model.instance.geojson.GeojsonFeature { *; }
-keep class org.javarosa.core.model.instance.geojson.GeojsonGeometry { *; }

-dontobfuscate

# recommended okhttp rules
# https://github.com/square/okhttp#r8--proguard
-dontwarn javax.annotation.**
-keepnames class okhttp3.internal.publicsuffix.PublicSuffixDatabase
-dontwarn org.codehaus.mojo.animal_sniffer.*
-dontwarn okhttp3.internal.platform.ConscryptPlatform

# Keep line numbers for Crashlytics https://stackoverflow.com/questions/38529304/android-crashlytics-sending-incorrect-line-number
-keepattributes SourceFile,LineNumberTable

# smap - AWS Android SDK v2 ProGuard rules
-keep class com.amazonaws.** { *; }
-keepclassmembers class com.amazonaws.** { *; }
-dontwarn com.amazonaws.**

# AWS Android SDK dependencies
-dontwarn org.apache.http.**
-dontwarn org.apache.commons.logging.**
-dontwarn com.fasterxml.jackson.**

# DynamoDB Mapper annotations
-keep @com.amazonaws.mobileconnectors.dynamodbv2.dynamodbmapper.DynamoDBTable class * { *; }
-keepclassmembers class * {
    @com.amazonaws.mobileconnectors.dynamodbv2.dynamodbmapper.DynamoDBHashKey *;
    @com.amazonaws.mobileconnectors.dynamodbv2.dynamodbmapper.DynamoDBAttribute *;
    @com.amazonaws.mobileconnectors.dynamodbv2.dynamodbmapper.DynamoDBRangeKey *;
}

# Cognito Identity and credentials
-keep class com.amazonaws.auth.** { *; }
-keep class com.amazonaws.services.cognitoidentity.** { *; }

# Keep our DynamoDB data objects
-keep class au.smap.fieldTask.aws.dynamodb.DevicesDO { *; }

# Gson rules - keep model classes used for JSON serialization/deserialization
# See: https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg
-keepattributes Signature
-keepattributes *Annotation*
-dontwarn sun.misc.**

# Keep Gson specific classes
-keep class com.google.gson.** { *; }

# Keep all smap model classes used with Gson
-keep class au.smap.fieldTask.models.** { *; }
-keep class au.smap.fieldTask.database.TaskResponseAssignment { *; }
-keep class au.smap.fieldTask.database.TrAssignment { *; }
-keep class au.smap.fieldTask.database.TrTask { *; }
-keep class au.smap.fieldTask.database.Location { *; }
-keep class au.smap.fieldTask.database.Geometry { *; }
-keep class au.smap.fieldTask.loaders.PointEntry { *; }
-keep class au.smap.fieldTask.loaders.TaskEntry { *; }

# Prevent R8 from leaving Data object members always null
-keepclassmembers,allowobfuscation class * {
  @com.google.gson.annotations.SerializedName <fields>;
}
